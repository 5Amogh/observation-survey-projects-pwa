<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/" (click)="goBack()"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-grid>
    <ion-row style="display: flex; align-items: center;">
      <ion-col size="12" >
        <ion-list>
          <ion-item>
            <ion-select   label="Select Program" label-placement="floating" [multiple]="false" [(ngModel)]="selectedProgram" (ionChange)="getprogram($event)">
              @for(item of programList; track $index){
                <ion-select-option  [value]="item?._id">{{item.externalId}}</ion-select-option>
              }
            </ion-select>
          </ion-item>
        </ion-list>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid>
    <ion-row>
      <ion-col size="12">
        <app-report-header [reportType]="reportType" [reportTitle]="'Project overview'" (emitReportType)="getReportType($event)" (emitReportAction)="getAction($event)"></app-report-header>
        <div>
          <ion-row>
            <ion-col size="6" sizeSm="3">
              <ion-card style="padding: 10px; display: flex; align-items: center; margin: 0px; height: 100%;">
                <div style="width: 30%; display: flex; justify-content: start;">
                  <ion-icon name="document-text" style="color: var(--ion-color-primary);" size="large"></ion-icon>
                </div>
                <div style="display: flex; flex-direction: column;">
                  <ion-label>Total Projects</ion-label>
                  <ion-label>{{reportData.projects.total}}</ion-label>
                </div>
              </ion-card>
            </ion-col>
            <ion-col size="6" sizeSm="3">
              <ion-card style="padding: 10px; display: flex; align-items: center; margin: 0px; height: 100%;">
                <div style="width: 30%; display: flex; justify-content: start;">
                  <ion-icon name="document-text" style="color: var(--ion-color-primary);" size="large"></ion-icon>
                </div>
                <div style="display: flex; flex-direction: column;">
                  <ion-label>Projects Submitted</ion-label>
                  <ion-label>{{reportData.projects.submitted}}</ion-label>
                </div>
              </ion-card>
            </ion-col>
            <ion-col size="6" sizeSm="3">
              <ion-card style="padding: 10px; display: flex; align-items: center; margin: 0px; height: 100%;">
                <div style="width: 30%; display: flex; justify-content: start;">
                  <ion-icon name="document-text" style="color: var(--ion-color-primary);" size="large"></ion-icon>
                </div>
                <div style="display: flex; flex-direction: column;">
                  <ion-label>Projects In Progress</ion-label>
                  <ion-label>{{reportData.projects.inProgress}}</ion-label>
                </div>
              </ion-card>
            </ion-col>
            <ion-col size="6" sizeSm="3">
              <ion-card style="padding: 10px; display: flex; align-items: center; margin: 0px; height: 100%;">
                <div style="width: 30%; display: flex; justify-content: start;">
                  <ion-icon name="document-text" style="color: var(--ion-color-primary);" size="large"></ion-icon>
                </div>
                <div style="display: flex; flex-direction: column;">
                  <ion-label>Projects</ion-label>
                  <ion-label>{{reportData.projects.started}}</ion-label>
                </div>
              </ion-card>
            </ion-col>
          </ion-row>
        </div>
      </ion-col>
      <ion-col size="12" sizeSm="6">
        <ion-card style="padding: 0 10px 10px 10px ; margin: 0px; height: 100%;">
          <app-report-header [reportType]="reportType" [reportTitle]="'Task overview'" (emitReportType)="getReportType($event)"></app-report-header>
          <div style="display: flex;justify-content: center; padding-top: 10px;">
            <div class="chart-container">
              <canvas id="doughnutChart" ></canvas>
            </div>
          </div>
        </ion-card>
      </ion-col>
      <ion-col size="12" sizeSm="6">
        <ion-card style="padding: 0 10px 10px 10px ;  margin: 0px; height: 100%;">
          <app-report-header [reportType]="reportType" [reportTitle]="'Category overview'" (emitReportType)="getReportType($event)"></app-report-header>
          <div style="display: flex;justify-content: center; padding-top: 10px;">
            <div class="chart-container">
              <canvas id="doughnutChartforcategory" ></canvas>
            </div>
          </div>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
  <!-- <ion-button expand="block" (click)="setOpen(true)">Open</ion-button> -->
  <ion-modal [isOpen]="isModalOpen" >
    <ng-template>
      <ion-content class="ion-padding">
        <h1 style="padding-bottom: 5px;"><strong>No Data available</strong></h1 >
        <p>
          Sorry there is no data available for the entity or program you selected
        </p>
        <div style="display: flex; justify-content: end;">
          <ion-button shape="round" (click)="setOpen(false)" fill="solid">ok</ion-button>
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>